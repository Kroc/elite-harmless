# "Elite" C64 disassembly / "Elite DX", cc0 2018, see LICENSE.txt
# "Elite" is copyright / trademark David Braben & Ian Bell, All Rights Reserved
# <github.com/Kroc/EliteDX>
#===============================================================================

FEATURES {
    STARTADDRESS:   default = $4000;
}
SYMBOLS {
    # force the PRG header to be included,
    # even though nothing links against it 
    __PRGHEADER__:  type = import;
}
MEMORY {
    # the .PRG header consists of the load address of the program;
    # it needs to occupy two bytes in the file, but not advance the address
    PRGHEADER:  file = %O,  start = %S - 2, size = $0002;
    MAIN:       file = %O,  start = %S,     size = $D000 - %S;
}
SEGMENTS {
    # the .PRG header comes first in the file, obviously.
    # note that "c64-prg.asm" actually populates this segment
    PRGHEADER:      load = PRGHEADER;
    
    # the already-encrypted first data-block
    DATA1:          load = MAIN,    define = yes;
    GMA4_JUNK1:     load = MAIN;
    # decryption routine
    CODE_STAGE4:    load = MAIN;
    # the already-encrypted second data-block
    DATA2:          load = MAIN,    define = yes;
    GMA4_JUNK2:     load = MAIN;
}
